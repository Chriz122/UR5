clc,clear,close all
a=imread('A1.png');
c=load('D1.txt');
imagePoints = detectCheckerboardPoints(a);
%%像素座標
h=[1:132];   %抓第幾個校正點
point=ones(length(h),3);

ZZZ=ones(length(h),1);
imshow(a)
for n=1:length(h)
    u=imagePoints(h(n),1);
    v=imagePoints(h(n),2);
    Z=c(round(v),round(u));
    ZZZ(n)=Z;
    %%P=像素轉換 T=轉換矩陣
    P=[u*Z/10000;v*Z/10000;Z;1];
    T=[-0.287948924281509,16.5637329067818,-0.420194026689613,-46.7921574040553;
        16.6041266797602,0.497127857137068,-0.557910226216805,-560.943017045044;
        0.491070106727183,-0.331688795630331,-1.03724117409923,1217.81527516523;
        0,0,0,1];            %深度變化一次
%     T=[-16.6808849656052,0.00111057327550402,0.539736690288717,211.614240440666;
%         -0.185780570256354,16.5968750125525,-0.618236586625280,-573.454819037675;
%         0.600051905012239,-0.229100492108679,0.00501111303989028,264.165685488162;
%         0,0,0,1];
    tt(n,1)=u;
    tt(n,2)=v;
    text(tt(n,1),tt(n,2),'o','Color','g')
    %%W=世界座標
    W=T*P/1000;
    W=W';
    point(n,1:3)=W(1,1:3);
    %%w

end
MIN=min(ZZZ)
MAX=max(ZZZ)









